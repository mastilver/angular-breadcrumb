/*! angular-breadcrumb - v0.2.2-dev-2014-06-26
* https://github.com/ncuillery/angular-breadcrumb
* Copyright (c) 2014 Nicolas Cuillery; Licensed MIT */
!function(a,b){function c(a,c){return b.equals(a.length,c.length)?a>c:a.length>c.length}function d(){var a={prefixStateName:null,template:"bootstrap3",templateUrl:null};this.setOptions=function(c){b.extend(a,c)},this.$get=["$state","$rootScope","$interpolate",function(d,e,f){var g=e,h=[];e.$on("$viewContentLoaded",function(a){c(a.targetScope.$id,g.$id)&&(g=a.targetScope);for(var e=[],f=b.copy(h).reverse(),i=d.$current.self;i&&""!==i.name;i=m(i))e.push(b.copy(i));if(0!==e.length&&0!==f.length){for(var j=0,n=0;e[j].name!==f[n].name;)if(n+=1,n===f.length){if(++j===e.length)break;n=0}j!==e.length&&(e=e.slice(0,j),f=f.slice(0,n))}var o;for(o=0;o<f.length;o++)l(h,f[o]);for(o=e.length-1;o>=0;o--)k(h,e[o])});var i=function(a,b){if(!a.data||!a.data[b])return!1;var c=j(a);return!(c&&c.data&&c.data[b]&&a.data[b]===c.data[b])},j=function(a){var b=a.parent||(/^(.+)\.[^.]+$/.exec(a.name)||[])[1];return b&&d.get(b)},k=function(a,b){if(b.ncyBreadcrumbLink=d.href(b.name),b.data&&b.data.ncyBreadcrumbLabel){var c=f(b.data.ncyBreadcrumbLabel);g.$watch(c,function(a){b.ncyBreadcrumbLabel=a})}else b.ncyBreadcrumbLabel=b.name;for(var e=0,h=a.length;h>e;e+=1)if(a[e].name===b.name)return;b.abstract||i(b,"ncyBreadcrumbSkip")||a.push(b)},l=function(b,c){for(var d=0,e=b.length;e>d;d++)if(c.name===b[d].name&&c.name!==a.prefixStateName){b.splice(d,1);break}},m=function(a){return i(a,"ncyBreadcrumbParent")?d.get(a.data.ncyBreadcrumbParent):j(a)};if(a.prefixStateName){var n=d.get(a.prefixStateName);if(!n)throw'Bad configuration : prefixState "'+a.prefixStateName+'" unknown';k(h,n)}return{getTemplate:function(b){return a.templateUrl?null:b[a.template]?b[a.template]:a.template},getTemplateUrl:function(){return a.templateUrl},getStatesChain:function(){return h}}}]}function e(a){return this.$$templates={bootstrap2:'<ul class="breadcrumb"><li ng-repeat="step in steps | limitTo:(steps.length-1)"><a href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span class="divider">/</span></li><li ng-repeat="step in steps | limitTo:-1" class="active"><span>{{step.ncyBreadcrumbLabel}}</span></li></ul>',bootstrap3:'<ol class="breadcrumb"><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last"><a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span></li></ol>'},{restrict:"AE",replace:!0,scope:{},template:a.getTemplate(this.$$templates),templateUrl:a.getTemplateUrl(),link:{post:function(b){b.steps=a.getStatesChain()}}}}e.$inject=["$breadcrumb"],b.module("ncy-angular-breadcrumb",["ui.router.state"]).provider("$breadcrumb",d).directive("ncyBreadcrumb",e)}(window,window.angular);